# --- الطبقة الأولى: الأساس ---
# ابدأ من صورة بايثون 3.11 رسمية (نسخة خفيفة "slim")
FROM python:3.11-slim

# --- الطبقة الثانية: مساحة العمل ---
# أنشئ مجلداً داخل الحاوية اسمه /app وضع كل شيء بداخله
WORKDIR /app

# --- الطبقة الثالثة: الاعتماديات (المكتبات) ---
# انسخ ملف المتطلبات أولاً
COPY requirements.txt .
# ثبّت المكتبات (دوكر سيحتفظ بهذه الطبقة "كاش" إذا لم يتغير الملف)
RUN pip install -r requirements.txt

# --- الطبقة الرابعة: الكود ---
# الآن انسخ باقي ملفات التطبيق (app.py)
COPY . .

# --- الطبقة الخامسة: الأمر ---
# الأمر الذي سيتم تشغيله عند بدء الحاوية
# (مثل كتابة "python app.py" في الطرفية)
CMD ["python", "app.py"]
